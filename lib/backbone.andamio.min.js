/*! backbone.andamio v1.0.0 | http://andamiojs.com | https://github.com/dciccale/Andamio.js/blob/master/LICENSE.txt */
(function(i,t,e){"use strict";var n={$:t.$};n.View=t.View.extend({constructor:function(){e.bindAll(this),this._bindSubviews(),t.View.apply(this,arguments)},render:function(){this.isClosed=!1;var i=this._serializeData(i);return this.$el.html(this.template(i)),this._bindRegions(),this._bindUIElements(),e.isFunction(this.afterRender)&&this.afterRender(),this},_serializeData:function(i){return i=this.model?this.model.toJSON():this.collection?this.collection.toJSON():i,this._mixinTemplateHelpers(i)},_bindRegions:function(){var i=this,t=i.$("[data-region]"),e=function(i){return function(t){t.$el=i,t.render()}};t.length&&(i.regions={},t.each(function(t,n){var s=$(n),o=s.attr("data-region");i.regions[o]={$el:s,show:e(s)},i.subviews[o]&&(i.subviews[o].$el=s)}))},_unbindRegions:function(){this.regions&&(this._deleteProp("regions"),this.regions={})},_bindUIElements:function(){this._bindProp("ui",function(i,t,e){this[t][e]=this.$(i[e])})},_unbindUIElements:function(){this._unbindProp("ui")},_bindSubviews:function(){this._bindProp("subviews",function(i,t,e){this[t][e]=i[e]})},_unbindSubviews:function(){this._unbindProp("subviews")},_unbindProp:function(i){var t="_"+i;this[i]&&(this._deleteProp(i),this[i]=this[t],delete this[t])},_bindProp:function(i,t){var n="_"+i;if(this[i]){this[n]||(this[n]=this[i]);var s=e.result(this,n);this[i]={},e.each(e.keys(s),function(e){t.call(this,s,i,e)},this)}},_removeSubviews:function(){this._deleteProp("subviews",function(i){i.remove()})},_deleteProp:function(i,t){var n=this[i];e.each(n,function(i,e){t&&t.call(this,i,e),delete n[e]},this),delete this[i]},remove:function(){this.isClosed||(this.isClosed=!0,this._removeSubviews(),this._unbindRegions(),this._unbindUIElements(),this.remove())},_mixinTemplateHelpers:function(i){i=i||{};var t=this.templateHelpers;return e.isFunction(t)&&(t=t.call(this)),e.extend(i,t)}}),n.Router=t.Router.extend({constructor:function(i){i.routes&&(this.routes=i.routes),this._initRoutes()},viewsPath:"views/",_initRoutes:function(){e.each(this.routes,function(i){var t=i.view,e=this._routeCallback(t);this.route(i.url,t,e)},this)},_routeCallback:function(i){var t=this,n=function(){var n=arguments;require([t.viewsPath+i],function(i){var s=new i;e.isFunction(s.loadModel)&&s.loadModel.apply(s,n),t.trigger("navigate",s,name,n)})};return n}}),n.Application=function(i){e.extend(this,i),this.listenTo(this.router,"navigate",this.show),this.initialize.apply(this,arguments)},e.extend(n.Application.prototype,t.Events,{el:"body",start:function(){this.initialize.apply(this,arguments)},initialize:function(){},show:function(i){this._ensureEl(),i!==this.currentView?(this._close(),i.render()):i.render(),this.currentView=i},_ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=$(this.el))},_open:function(i){this.$el.empty().append(i.el)},_close:function(){this.currentView&&this.currentView.remove()}}),n.Application.extend=n.extend,i.Andamio=t.Andamio=n,function(i,t){if("object"==typeof exports){var e=require("underscore"),n=require("backbone");module.exports=t(e,n)}else"function"==typeof define&&define.amd&&define(["underscore","backbone"],t)}(this,function(){return n})})(this,Backbone,_);
//@ sourceMappingURL=lib/backbone.andamio.sourcemap.js