/*! backbone.andamio v1.0.0 | http://andamiojs.com | https://github.com/dciccale/Andamio.js/blob/master/LICENSE.txt */
(function(i,e,t){"use strict";var n={$:e.$,extend:e.Model.extend};n.View=e.View.extend({constructor:function(){t.bindAll(this),this._bindSubviews(),e.View.apply(this,arguments)},render:function(){this.isClosed=!1;var i=this._serializeData(i);return this.$el.html(this.template(i)),this._bindRegions(),this._bindUIElements(),t.isFunction(this.afterRender)&&this.afterRender(),this},_serializeData:function(i){return i=this.model?this.model.toJSON():this.collection?this.collection.toJSON():i,this._mixinTemplateHelpers(i)},_bindRegions:function(){var i=this,e=i.$("[data-region]"),t=function(i){return function(e){e.$el=i,e.render()}};e.length&&(i.regions={},e.each(function(e,n){var s=$(n),o=s.attr("data-region");i.regions[o]={$el:s,show:t(s)},i.subviews[o]&&(i.subviews[o].$el=s)}))},_unbindRegions:function(){this.regions&&(this._deleteProp("regions"),this.regions={})},_bindUIElements:function(){this._bindProp("ui",function(i,e,t){this[e][t]=this.$(i[t])})},_unbindUIElements:function(){this._unbindProp("ui")},_bindSubviews:function(){this._bindProp("subviews",function(i,e,t){this[e][t]=i[t]})},_unbindSubviews:function(){this._unbindProp("subviews")},_unbindProp:function(i){var e="_"+i;this[i]&&(this._deleteProp(i),this[i]=this[e],delete this[e])},_bindProp:function(i,e){var n="_"+i;if(this[i]){this[n]||(this[n]=this[i]);var s=t.result(this,n);this[i]={},t.each(t.keys(s),function(t){e.call(this,s,i,t)},this)}},_removeSubviews:function(){this._deleteProp("subviews",function(i){i.remove()})},_deleteProp:function(i,e){var n=this[i];t.each(n,function(i,t){e&&e.call(this,i,t),delete n[t]},this),delete this[i]},remove:function(){this.isClosed||(this.isClosed=!0,this._removeSubviews(),this._unbindRegions(),this._unbindUIElements(),this.remove())},_mixinTemplateHelpers:function(i){i=i||{};var e=this.templateHelpers;return t.isFunction(e)&&(e=e.call(this)),t.extend(i,e)}}),n.Router=e.Router.extend({constructor:function(i){if(t.extend(this,i),!this.views)throw Error('Provide a correct path for the views in the "views" option.');this._initRoutes(),this.initialize.apply(this,arguments)},initialize:function(){},views:"",_initRoutes:function(){t.each(this.routes,function(i){var e=i.url,t=i.view,n=this._routeCallback(e,t);this.route(e,t,n)},this)},_routeCallback:function(i,e){var n=this,s=function(){var s=arguments;require([n.views+e],function(e){var o=new e;t.isFunction(o.loadModel)&&o.loadModel.apply(o,s),n.trigger("navigate",i,o,s)})};return s}}),n.Application=function(i){t.extend(this,i)},t.extend(n.Application.prototype,e.Events,{el:"body",start:function(){this.initialize.apply(this,arguments),this.listenTo(this.router,"navigate",this.show)},initialize:function(){},show:function(i,e){this._ensureEl(),e!==this.currentView?(this._close(),e.render(),this._open(e)):e.render(),this.currentView=e},_ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=$(this.el))},_open:function(i){this.$el.empty().append(i.el)},_close:function(){this.currentView&&this.currentView.remove()}}),n.Application.extend=n.extend,i.Andamio=e.Andamio=n,function(i,e){if("object"==typeof exports){var t=require("underscore"),n=require("backbone");module.exports=e(t,n)}else"function"==typeof define&&define.amd&&define(["underscore","backbone"],e)}(this,function(){return n})})(this,Backbone,_);
//@ sourceMappingURL=lib/backbone.andamio.sourcemap.js